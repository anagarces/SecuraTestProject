<div class="max-w-6xl mx-auto mt-10 px-4 sm:px-6 lg:px-8">
  <!-- ENCABEZADO Y BOTÓN CREAR -->
  <div class="sm:flex sm:items-center sm:justify-between mb-8">
    <div>
      <h1
        class="text-3xl font-bold text-gray-900 dark:text-white tracking-tight"
      >
        Cuestionarios
      </h1>
      <p class="mt-2 text-sm text-gray-500 dark:text-gray-400">
        Gestiona, edita y organiza las evaluaciones de la plataforma.
      </p>
    </div>
    <div class="mt-4 sm:mt-0 sm:ml-16 sm:flex-none">
      <button
        (click)="createQuiz()"
        class="inline-flex items-center justify-center rounded-md border border-transparent bg-green-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-all transform hover:scale-105"
      >
        <svg
          class="-ml-1 mr-2 h-5 w-5"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M12 4v16m8-8H4"
          />
        </svg>
        Crear cuestionario
      </button>
    </div>
  </div>

  <!-- CONTENEDOR PRINCIPAL -->
  <div
    class="bg-white dark:bg-gray-800 shadow-sm ring-1 ring-gray-900/5 sm:rounded-lg overflow-hidden"
  >
    <!-- LOADER -->
    <div
      *ngIf="loading"
      class="flex flex-col items-center justify-center py-12"
    >
      <div
        class="animate-spin rounded-full h-10 w-10 border-b-2 border-indigo-600 mb-3"
      ></div>
      <p class="text-sm text-gray-500 animate-pulse">
        Cargando cuestionarios...
      </p>
    </div>

    <!-- TABLA -->
    <div *ngIf="!loading && quizzes.length > 0" class="overflow-x-auto">
      <table class="min-w-full divide-y divide-gray-300 dark:divide-gray-700">
        <thead class="bg-gray-50 dark:bg-gray-700/50">
          <tr>
            <th
              scope="col"
              class="py-3.5 pl-4 pr-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-500 dark:text-gray-300 sm:pl-6"
            >
              Título
            </th>
            <th
              scope="col"
              class="px-3 py-3.5 text-left text-xs font-semibold uppercase tracking-wider text-gray-500 dark:text-gray-300"
            >
              Descripción
            </th>
            <th
              scope="col"
              class="px-3 py-3.5 text-center text-xs font-semibold uppercase tracking-wider text-gray-500 dark:text-gray-300"
            >
              Preguntas
            </th>
            <th
              scope="col"
              class="relative py-3.5 pl-3 pr-4 sm:pr-6 text-center text-xs font-semibold uppercase tracking-wider text-gray-500 dark:text-gray-300"
            >
              Acciones
            </th>
          </tr>
        </thead>
        <tbody
          class="divide-y divide-gray-200 dark:divide-gray-700 bg-white dark:bg-gray-800"
        >
          <tr
            *ngFor="let quiz of quizzes"
            class="hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"
          >
            <!-- TÍTULO -->
            <td
              class="whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 dark:text-white sm:pl-6"
            >
              {{ quiz.title }}
            </td>

            <!-- DESCRIPCIÓN (Truncada para que no rompa la tabla) -->
            <td
              class="whitespace-nowrap px-3 py-4 text-sm text-gray-500 dark:text-gray-300 max-w-xs truncate"
              title="{{ quiz.description }}"
            >
              {{ quiz.description }}
            </td>

            <!-- CONTEO PREGUNTAS (Badge) -->
            <td class="whitespace-nowrap px-3 py-4 text-sm text-center">
              <span
                class="inline-flex items-center rounded-full bg-blue-50 px-2.5 py-0.5 text-xs font-medium text-blue-700 ring-1 ring-inset ring-blue-700/10 dark:bg-blue-900/30 dark:text-blue-300"
              >
                {{ quiz.questions?.length || 0 }}
              </span>
            </td>

            <!-- ACCIONES -->
            <td
              class="relative whitespace-nowrap py-4 pl-3 pr-4 text-center text-sm font-medium sm:pr-6 space-x-2"
            >
              <!-- Botón Editar -->
              <button
                (click)="editQuiz(quiz.id!)"
                class="text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300 bg-indigo-50 dark:bg-indigo-900/20 hover:bg-indigo-100 px-3 py-1.5 rounded transition-colors"
              >
                Editar
              </button>

              <!-- Botón Eliminar -->
              <button
                (click)="deleteQuiz(quiz.id!)"
                class="text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 px-3 py-1.5 rounded transition-colors"
              >
                Eliminar
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- EMPTY STATE (Sin cuestionarios) -->
    <div
      *ngIf="!loading && quizzes.length === 0"
      class="text-center py-16 bg-white dark:bg-gray-800"
    >
      <svg
        class="mx-auto h-12 w-12 text-gray-400"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
        aria-hidden="true"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="1"
          d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"
        />
      </svg>
      <h3 class="mt-2 text-sm font-medium text-gray-900 dark:text-white">
        No hay cuestionarios
      </h3>
      <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">
        Comienza creando una nueva evaluación para tus usuarios.
      </p>
      <div class="mt-6">
        <button
          (click)="createQuiz()"
          class="inline-flex items-center rounded-md border border-transparent bg-green-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2"
        >
          <svg
            class="-ml-1 mr-2 h-5 w-5"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M12 4v16m8-8H4"
            />
          </svg>
          Crear cuestionario
        </button>
      </div>
    </div>
  </div>
</div>
