<div class="flex flex-col min-h-screen bg-gray-50 dark:bg-gray-900">
  <!-- BARRA DE NAVEGACIÓN (HEADER) - Con Sombra Vibrante -->
  <nav
    class="bg-white dark:bg-gray-800 shadow-xl shadow-indigo-300/30 dark:shadow-indigo-900/50 sticky top-0 z-50 transition-all duration-300"
  >
    <div
      class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4"
    >
      <!-- Brand -->
      <a
        routerLink="/"
        class="flex items-center space-x-3 rtl:space-x-reverse group"
      >
        <!-- Ícono/Logo adaptado al color principal -->
        <svg
          class="h-8 w-8 text-indigo-600 dark:text-pink-500 group-hover:text-indigo-700 transition-colors"
          fill="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"
          />
        </svg>
        <span
          class="self-center text-2xl font-extrabold whitespace-nowrap text-gray-900 dark:text-white"
          >SecuraTest</span
        >
      </a>

      <!-- Mobile toggle (Mantenido) -->
      <button
        data-collapse-toggle="navbar-default"
        type="button"
        class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600"
        aria-controls="navbar-default"
        aria-expanded="false"
      >
        <span class="sr-only">Abrir menú</span>
        <svg
          class="w-5 h-5"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 17 14"
        >
          <path
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M1 1h15M1 7h15M1 13h15"
          />
        </svg>
      </button>

      <!-- Links -->
      <div class="hidden w-full md:block md:w-auto" id="navbar-default">
        <ul
          class="font-medium flex flex-col p-4 md:p-0 mt-4 border border-gray-100 rounded-lg bg-gray-50 md:flex-row md:space-x-4 rtl:space-x-reverse md:mt-0 md:border-0 md:bg-white dark:bg-gray-800 md:dark:bg-gray-800 dark:border-gray-700"
        >
          <!-- Enlaces de navegación principales -->
          <li
            *ngFor="
              let link of [
                {
                  path: '/',
                  label: 'Inicio',
                  icon: '<path d=\'M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z\' />'
                },
                {
                  path: '/contenido',
                  label: 'Contenido',
                  icon: '<path d=\'M4 19.5A2.5 2.5 0 0 1 6.5 17H20\' /><path d=\'M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z\' />',
                  auth: true
                },
                {
                  path: '/quizzes',
                  label: 'Cuestionarios',
                  icon: '<path d=\'M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z\' /><path d=\'M14 2v5h5\' />',
                  auth: true
                },
                {
                  path: '/mis-resultados',
                  label: 'Mis resultados',
                  icon: '<path d=\'M3 3v18h18M18 17V9m-4 8v-5m-4 5V5\' />',
                  auth: true
                }
              ]
            "
          >
            <a
              [routerLink]="link.path"
              [routerLinkActive]="
                link.path === '/'
                  ? 'text-pink-600 dark:text-pink-400 bg-indigo-50 dark:bg-gray-700/50 rounded-lg'
                  : 'text-pink-600 dark:text-pink-400 bg-indigo-50 dark:bg-gray-700/50 rounded-lg'
              "
              [routerLinkActiveOptions]="{ exact: link.path === '/' }"
              class="block py-2 px-3 transition-colors duration-200 md:p-0 text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-pink-400 md:hover:bg-transparent md:hover:text-pink-500 flex items-center space-x-2"
              *ngIf="!link.auth || authService.isLoggedIn()"
            >
              <svg
                class="w-5 h-5"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                [innerHTML]="link.icon"
              ></svg>
              <span>{{ link.label }}</span>
            </a>
          </li>

          <!-- ADMIN (solo ADMIN) -->
          <li *ngIf="authService.isAdmin()" class="relative">
            <button
              id="adminDropdownButton"
              type="button"
              class="flex items-center py-2 px-3 rounded-lg transition-colors duration-200 md:p-0 text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-pink-400 md:hover:bg-transparent md:hover:text-pink-500"
              (click)="toggleAdminMenu()"
            >
              <svg
                class="w-5 h-5 mr-1 text-yellow-500 dark:text-yellow-400"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path
                  d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-5.65 5.65a1 1 0 0 1-1.42-1.42l5.65-5.65a6 6 0 0 1 7.94-7.94l-3.77 3.77z"
                />
              </svg>
              Administración
              <svg
                class="w-4 h-4 ml-1 transform transition-transform"
                [ngClass]="{ 'rotate-180': adminMenuOpen }"
                aria-hidden="true"
                fill="none"
                viewBox="0 0 10 6"
              >
                <path
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 1 5 5 1 1"
                />
              </svg>
            </button>

            <!-- Dropdown -->
            <div
              *ngIf="adminMenuOpen"
              (click)="toggleAdminMenu()"
              class="absolute z-50 mt-2 w-60 bg-white dark:bg-gray-700 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-600 overflow-hidden"
            >
              <ul class="py-2 text-sm text-gray-700 dark:text-gray-200">
                <li
                  *ngFor="
                    let adminLink of [
                      {
                        path: '/admin/quizzes',
                        label: 'Gestionar cuestionarios',
                        icon: '<path d=\'M8 21h8M12 3v18\' /><path d=\'M12 3a4 4 0 0 0-4 4c0 3 4 5 4 5s4-2 4-5a4 4 0 0 0-4-4z\' />',
                        color: 'text-indigo-500'
                      },
                      {
                        path: '/admin/contenidos',
                        label: 'Gestionar contenidos',
                        icon: '<path d=\'M4 19.5A2.5 2.5 0 0 1 6.5 17H20\' /><path d=\'M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z\' />',
                        color: 'text-green-500'
                      },
                      {
                        path: '/admin/users',
                        label: 'Gestionar usuarios / Roles',
                        icon: '<path d=\'M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 00-4 4v2\' /><circle cx=\'8.5\' cy=\'7\' r=\'4\' /><path d=\'M22 13.77V21M17 19l2 2 4-4\' />',
                        color: 'text-blue-500'
                      },
                      {
                        path: '/admin/results',
                        label: 'Resultados de usuarios',
                        icon: '<path d=\'M3 3v18h18M18 17V9m-4 8v-5m-4 5V5\' />',
                        color: 'text-red-500'
                      }
                    ]
                  "
                >
                  <a
                    [routerLink]="adminLink.path"
                    class="flex items-center space-x-3 px-4 py-3 hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors duration-150"
                  >
                    <svg
                      class="w-5 h-5"
                      [ngClass]="adminLink.color"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      [innerHTML]="adminLink.icon"
                    ></svg>
                    <span>{{ adminLink.label }}</span>
                  </a>
                </li>
              </ul>
            </div>
          </li>

          <!-- Login/Register (solo NO logueado) -->
          <ng-container *ngIf="!authService.isLoggedIn()">
            <li>
              <a
                routerLink="/login"
                routerLinkActive="text-pink-600 dark:text-pink-400 bg-indigo-50 dark:bg-gray-700/50 rounded-lg"
                class="block py-2 px-3 transition-colors duration-200 md:p-0 text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-pink-400 md:hover:bg-transparent md:hover:text-pink-500 flex items-center space-x-2"
              >
                <svg
                  class="w-5 h-5"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path
                    d="M15 3h6v6M10 14L21 3M21 3L14 3m7 0v7M10 14l-7 7m0 0l7 7m-7-7h7m0 0v7"
                  />
                </svg>
                <span>Iniciar sesión</span>
              </a>
            </li>
            <li>
              <a
                routerLink="/register"
                routerLinkActive="text-pink-600 dark:text-pink-400 bg-indigo-50 dark:bg-gray-700/50 rounded-lg"
                class="block py-2 px-3 transition-colors duration-200 md:p-0 text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-pink-400 md:hover:bg-transparent md:hover:text-pink-500 flex items-center space-x-2"
              >
                <svg
                  class="w-5 h-5"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 00-4 4v2" />
                  <circle cx="8.5" cy="7" r="4" />
                </svg>
                <span>Registrarse</span>
              </a>
            </li>
          </ng-container>

          <!-- Cerrar sesión (solo logueado) -->
          <!-- Cerrar sesión con loader UX -->
          <li *ngIf="authService.isLoggedIn()">
            <button
              (click)="logout()"
              [disabled]="isLoggingOut"
              class="flex items-center gap-2 py-2 px-3 rounded-lg transition-all duration-200 md:p-0 text-gray-700 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 md:hover:bg-transparent md:hover:text-red-500 disabled:opacity-50 disabled:cursor-not-allowed"
            >
              <svg
                class="w-5 h-5"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path
                  d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4M16 17l5-5-5-5M21 12H9"
                />
              </svg>

              <span *ngIf="!isLoggingOut">Cerrar sesión</span>

              <!-- mini-spinner -->
              <span
                *ngIf="isLoggingOut"
                class="w-4 h-4 border-2 border-red-400 border-t-transparent rounded-full animate-spin"
              ></span>
            </button>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- CONTENIDO PRINCIPAL -->
  <main class="flex-grow">
    <!-- El contenido de la ruta actual se mostrará aquí -->
    <router-outlet></router-outlet>
  </main>

  <!-- FOOTER MODERNO - Con Borde de Contraste -->
  <footer
    class="bg-white dark:bg-gray-800 border-t-4 border-indigo-200 dark:border-indigo-900 mt-10 shadow-inner"
  >
    <div class="mx-auto w-full max-w-screen-xl p-4 py-8 lg:py-10">
      <div class="md:flex md:justify-between">
        <!-- Brand and Mission -->
        <div class="mb-8 md:mb-0">
          <a
            routerLink="/"
            class="flex items-center space-x-3 rtl:space-x-reverse"
          >
            <svg
              class="h-8 w-8 text-indigo-600 dark:text-pink-500"
              fill="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"
              />
            </svg>
            <span
              class="self-center text-2xl font-extrabold whitespace-nowrap text-gray-900 dark:text-white"
              >SecuraTest</span
            >
          </a>
          <p class="mt-3 text-sm text-gray-600 dark:text-gray-400 max-w-xs">
            Refuerza tu defensa digital. El factor humano, la clave de nuestra
            seguridad.
          </p>
        </div>

        <!-- Links Groups -->
        <div class="grid grid-cols-2 gap-8 sm:gap-6 sm:grid-cols-3">
          <!-- Resources -->
          <div>
            <h2
              class="mb-4 text-sm font-bold tracking-widest text-indigo-700 dark:text-pink-400 uppercase"
            >
              Recursos
            </h2>
            <ul class="text-gray-500 dark:text-gray-400 font-medium space-y-2">
              <li>
                <a
                  href="#"
                  class="hover:underline hover:text-indigo-600 transition-colors"
                  >Contenido</a
                >
              </li>
              <li>
                <a
                  href="#"
                  class="hover:underline hover:text-indigo-600 transition-colors"
                  >Cuestionarios</a
                >
              </li>
              <li>
                <a
                  href="#"
                  class="hover:underline hover:text-indigo-600 transition-colors"
                  >Resultados</a
                >
              </li>
            </ul>
          </div>

          <!-- Follow Us -->
          <div>
            <h2
              class="mb-4 text-sm font-bold tracking-widest text-indigo-700 dark:text-pink-400 uppercase"
            >
              Síguenos
            </h2>
            <ul class="text-gray-500 dark:text-gray-400 font-medium space-y-2">
              <li>
                <a
                  href="#"
                  class="hover:underline hover:text-indigo-600 transition-colors"
                  >LinkedIn</a
                >
              </li>
              <li>
                <a
                  href="#"
                  class="hover:underline hover:text-indigo-600 transition-colors"
                  >GitHub</a
                >
              </li>
              <li>
                <a
                  href="#"
                  class="hover:underline hover:text-indigo-600 transition-colors"
                  >Twitter</a
                >
              </li>
            </ul>
          </div>

          <!-- Legal -->
          <div>
            <h2
              class="mb-4 text-sm font-bold tracking-widest text-indigo-700 dark:text-pink-400 uppercase"
            >
              Legal
            </h2>
            <ul class="text-gray-500 dark:text-gray-400 font-medium space-y-2">
              <li>
                <a
                  href="#"
                  class="hover:underline hover:text-indigo-600 transition-colors"
                  >Política de Privacidad</a
                >
              </li>
              <li>
                <a
                  href="#"
                  class="hover:underline hover:text-indigo-600 transition-colors"
                  >Términos y Condiciones</a
                >
              </li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Bottom Bar -->
      <hr class="my-8 border-gray-200 dark:border-gray-700" />
      <div class="sm:flex sm:items-center sm:justify-between">
        <span class="text-sm text-gray-500 sm:text-center dark:text-gray-400">
          © {{ 2025 }}
          <a routerLink="/" class="hover:underline">SecuraTest™</a>. Todos los
          derechos reservados.
        </span>

        <!-- Social Icons (Simplificado y adaptado al diseño) -->
        <div class="flex mt-4 sm:justify-center sm:mt-0 space-x-5">
          <svg
            class="w-5 h-5 text-gray-500 hover:text-indigo-600 dark:hover:text-pink-500 transition-colors"
            fill="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"
            />
          </svg>
          <!-- Facebook/Social 1 -->
          <svg
            class="w-5 h-5 text-gray-500 hover:text-indigo-600 dark:hover:text-pink-500 transition-colors"
            fill="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15h-2v-6h2v6zm4 0h-2v-6h2v6z"
            />
          </svg>
          <!-- Discord/Social 2 -->
          <svg
            class="w-5 h-5 text-gray-500 hover:text-indigo-600 dark:hover:text-pink-500 transition-colors"
            fill="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              d="M12 2.163c3.204 0 3.584.012 4.85.07c3.252.148 4.771 1.581 4.904 4.85.058 1.265.068 1.645.068 4.85s-.01 3.585-.068 4.85c-.133 3.269-1.652 4.792-4.904 4.904-1.266.058-1.646.068-4.85.068s-3.585-.01-4.85-.068c-3.269-.133-4.792-1.652-4.904-4.904-.058-1.265-.068-1.645-.068-4.85s.01-3.585.068-4.85c.133-3.269 1.652-4.787 4.904-4.904 1.265-.058 1.645-.068 4.85-.068zm0-2.163C8.752 0 8.358.01 7.07.07c-3.535.15-5.32 1.93-5.47 5.47-.06 1.288-.07 1.682-.07 4.39s.01 3.102.07 4.39c.15 3.54 1.93 5.32 5.47 5.47 1.288.06 1.682.07 4.39.07s3.102-.01 4.39-.07c3.54-.15 5.32-1.93 5.47-5.47.06-1.288.07-1.682.07-4.39s-.01-3.102-.07-4.39c-.15-3.54-1.93-5.32-5.47-5.47C15.102 0 14.708 0 12 0zm0 5.838a6.162 6.162 0 1 0 0 12.324 6.162 6.162 0 0 0 0-12.324zm0 10.162a4 4 0 1 1 0-8 4 4 0 0 1 0 8z"
            />
          </svg>
          <!-- Instagram/Social 3 -->
        </div>
      </div>
    </div>
  </footer>
</div>
